#######################################
#	Plugin: my_gallery            #
#		Alex ANP              #
#       	alex-anp@ya.ru        #
#       www.e107.org.ru               #
#	e107 v7.8+                    #
#######################################

Плагин позволяет создавать фото галерею на сайте.

Для работы фото галереи используется скрипт "highslide" 
Он позволяет увеличивать иконки фотографий для просмотра, а также навигацию по ним с помощью клавиш управления курсором или кнопок на самом слайде (зависит он настроек highslide). 
Подробнее про highslide можно почитать на официальном сайте http://vikjavev.no/highslide

Фото галерея формируется средствами файловой системы, для этого используется двух уровневая иерархия (Раздел/Категория).
В каталогах категорий хранятся фотографии в формате jpg, другие форматы не поддерживаются. Файлы иконок и просмотра создавать не нужно, они создаются сервером автоматически из исходного файла при обращении к нему.

Gallery            - Корневой каталог
   \Gallery 1         - Каталог раздела 1
      \Folder 1         \
      \Folder 2         |
      ...               |- Каталоги категорий, содержат фотографии
      ...               |
      \folder N         /
   \Gallery 2         - Каталог раздела 2
      \folder 1         \
      \folder 2         |
      ...               |- Каталоги категорий, содержат фотографии
      ...               |
      \folder N         /
   ...
   ...
   \Gallery N         - Каталог раздела N
      \folder 1         \
      \folder 2         |
      ...               |- Каталоги категорий, содержат фотографии
      ...               |
      \folder N         /

СТРУКТУРА ПЛАГИНА
		         
highslide                 - каталог highslide
images                    - каталог служебных изображения плагина 
languages                 - каталог с языковыми файлами
admin_conf          php   - файл панели администрирования
e_meta              php   - файл для добавления мета данных
foto                php   - php скрипт, обрабатывает изображения по заданным параметрам
highslide           css   - файл стилевой странички, описывает дизайн элементов highslide
memo_edit           php   - файл редактор описания галереи
my_gallery          css   - файл стилевой странички, описывает дизайн элементов my_gallery 
my_gallery          php   - основной файл плагина my_gallery
my_gallery_menu     php   - файл меню случайной картинки
plugin              php   - файл описания плагина
readme              txt   - этот файл
tn_foto             php   - php скрипт, создает иконки с использованием подложки images/tn_blank.jpg 

ИНСТАЛЯЦИЯ

1. Распакуйте архив плагина в каталог e107_plugins/
2. Активируйте его в панели управления плагинами.
3. Откройте панель администрирования плагина, произведите настройку.
	Необходимо указать:
		- каталог расположения фото галереи (по умолчанию ./Gallery)
		- количество иконок на странице (по умолчанию 16)
		- максимальные размеры иконки (по умолчанию 94х120)
		- максимальные размеры просмотра (по умолчанию 480х580)
		- вид отображения главной страницы галереи (можно выбрать отображение титульной картинки 
			или случайных изображений из галереи)
		- путь к титульной картинке (по умолчанию ./images/title_image.jpg, если не нужно оставить пустым)
		- название фото галереи
		- расположение панели навигации (по умолчанию вверху страницы)
		- метод отображения иконок (по умолчанию в виде слайлов)
		- отображение описания галерей (по умолчанию, под галереей)
		- название меню случайной картинки
		- максимальный размер иконки в меню случайной картинки (по умолчанию 140)
	Сохраните изменения.
4. Отредактируйте название пункта меню, панель администрирования "ссылки сайта", (по умолчанию присваивается значение MYGAL_L003 языкового файла)
5. Настройте меню случайной картинки, панель администрирования "меню", (по умолчанию не активна)  
6. Смотрим что получилось.

РАБОТА СО СЛАЙДОМ

Если в настройках отображения иконок включить метод "использовать слайд" (images/tn_blank.jpg) то в галерее иконки будут отображаться в виде слайдов. 
Файл images/tn_blank.jpg это заготовка слайда, ее можно создать свою, с учетом дизайна сайта и подходящего размера.
Принцип работы со слайдом следующий:
- определяются размеры слайда (например images/tn_blank.jpg имеет размеры WxH 150x100 точек)
- определяются координаты позиционирования иконки - x=W/2, y=H*0.9/2(то есть иконка позиционируется в центр слайда со смещением вверх на 10%)
- соответственно максимальные размеры иконки задаем из этого расчета (например при выше указанных размерах слайда можно установить максимальный размер иконки 90x140, получим отступы 5 и 5 точек по горизонтали и 5 и 15 по вертикали)
Если максимальный размер иконки будет больше размеров слайда, то выступающие края будут обрезаны.

РАБОТА С КОМЕНТАРИЯМИ

Если включить отображение комментариев к галерее, "Показывать описание к галерее", то каталоги с фотографиями будут просматриваться на предмет наличия в них файла index.php. Он сохраняет две переменные $name и $memo.
Есть он или нет, администратор сайта получает возможность создавать их или редактировать, для этого появляется кнопка [Edit], она вызывает форму редактирования описания текущей галереи.    

ОФОРМЛЕНИЕ, ДИЗАЙН

Оформление галереи в первую очередь зависит от используемой темы, так как применяются стандартные методы вывода информации движка e107.  
Но что бы плагин my_gallry лучше вписался в дизайн сайта есть следующий функционал:
- стилевая страничка my_gallery.css, задает дизайн отображения 
	- разделов (.mygall_folder_a), 
	- категорий (.mygall_folder_b), 
	- навигатора по страницам (.mygall_page_nav), 
	- кнопки [Edit] (.memo_edit_buton), 
	- заголовка редактора описания (.memo_edit_msg). 
Если в этих классах ничего не прописывать, оставить пустыми, то будет использоваться стили темы сайта.

- стилевая страничка highslide.css, задает дизайн элементов highslide, можно редактировать самостоятельно или подложить подходящий вариант (примеры есть на сайте разработчика http://vikjavev.no/highslide) 

- возможность использовать слайд(images/tn_blank.jpg), подкладывается под иконки, является jpg файлом, можно отредактировать на усмотрение вебдизайнера.
 
